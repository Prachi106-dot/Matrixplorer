<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthogonal Trajectories Solver</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #f1f1f1;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #0f3460, #533483);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo i {
            color: #4cc9f0;
        }
        
        .nav-buttons {
            display: flex;
            gap: 15px;
        }
        
        .nav-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background-color: #4cc9f0;
            color: #16213e;
        }
        
        .page {
            display: none;
            padding: 30px;
        }
        
        .page.active {
            display: block;
        }
        
        .page-title {
            margin-bottom: 25px;
            color: #4cc9f0;
            border-bottom: 2px solid #533483;
            padding-bottom: 10px;
        }
        
        /* Page 1 - Instructions */
        .instruction-card {
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #4cc9f0;
        }
        
        .instruction-card h3 {
            margin-bottom: 15px;
            color: #f72585;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instruction-card ul, .instruction-card ol {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instruction-card li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .example-box {
            background-color: rgba(15, 52, 96, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
        }
        
        /* Page 2 - Solver */
        .solver-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 900px) {
            .solver-container {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .output-section {
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4cc9f0;
        }
        
        .equation-input {
            width: 100%;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid #533483;
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            font-family: monospace;
        }
        
        .equation-input:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 2px rgba(76, 201, 240, 0.3);
        }
        
        .hint {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 5px;
        }
        
        .solve-btn {
            background: linear-gradient(to right, #f72585, #b5179e);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .solve-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(247, 37, 133, 0.4);
        }
        
        .solve-btn:active {
            transform: translateY(-1px);
        }
        
        .graph-container {
            height: 400px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .steps-container {
            margin-top: 25px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .step {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 3px solid #f72585;
        }
        
        .step-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4cc9f0;
        }
        
        .step-content {
            font-family: monospace;
            white-space: pre-wrap;
            line-height: 1.5;
        }
        
        .example-equations {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .example-btn {
            background-color: rgba(76, 201, 240, 0.2);
            border: 1px solid #4cc9f0;
            color: #4cc9f0;
            padding: 8px 15px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .example-btn:hover {
            background-color: rgba(76, 201, 240, 0.3);
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #533483;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #4cc9f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-project-diagram"></i>
                <span>Orthogonal Trajectories Solver</span>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn active" id="page1-btn">Instructions</button>
                <button class="nav-btn" id="page2-btn">Equation Solver</button>
            </div>
        </header>
        
        <!-- Page 1: Instructions -->
        <div class="page active" id="page1">
            <h1 class="page-title">How to Use the Orthogonal Trajectories Solver</h1>
            
            <div class="instruction-card">
                <h3><i class="fas fa-info-circle"></i> What are Orthogonal Trajectories?</h3>
                <p>Orthogonal trajectories are families of curves that intersect another family of curves at right angles. Given a family of curves defined by F(x, y, C) = 0, the orthogonal trajectories are found by solving the differential equation obtained by replacing y' with -1/y'.</p>
            </div>
            
            <div class="instruction-card">
                <h3><i class="fas fa-list-ol"></i> Steps to Use the Solver</h3>
                <ol>
                    <li>Go to the <strong>Equation Solver</strong> page by clicking the button in the header.</li>
                    <li>Enter your equation in terms of x and y variables only. Use standard mathematical notation.</li>
                    <li>You can enter equations in these forms:
                        <ul>
                            <li>Explicit form: y = f(x)</li>
                            <li>Implicit form: f(x, y) = C</li>
                            <li>Differential form: dy/dx = f(x, y)</li>
                        </ul>
                    </li>
                    <li>Click the <strong>Solve Orthogonal Trajectories</strong> button to get step-by-step solution.</li>
                    <li>View the graph showing both the original family of curves and their orthogonal trajectories.</li>
                </ol>
            </div>
            
            <div class="instruction-card">
                <h3><i class="fas fa-keyboard"></i> Equation Format Examples</h3>
                <div class="example-box">
                    <p><strong>Explicit form:</strong> y = x^2 + 3x - 5</p>
                    <p><strong>Implicit form:</strong> x^2 + y^2 = C</p>
                    <p><strong>Differential form:</strong> dy/dx = x/y</p>
                    <p><strong>With trigonometric functions:</strong> y = sin(x) + cos(x)</p>
                    <p><strong>With exponential functions:</strong> y = e^(2x) + 3</p>
                </div>
                <p class="hint">Note: Use ^ for exponentiation, * for multiplication, and / for division. Use parentheses to group expressions.</p>
            </div>
            
            <div class="instruction-card">
                <h3><i class="fas fa-lightbulb"></i> Tips for Best Results</h3>
                <ul>
                    <li>Make sure your equation only contains x and y variables (no other letters).</li>
                    <li>For implicit forms, write the equation with "= C" where C is the constant.</li>
                    <li>Use parentheses to clarify the order of operations: y = (x+1)/(x-1)</li>
                    <li>Try the example equations on the solver page to see how it works.</li>
                </ul>
            </div>
        </div>
        
        <!-- Page 2: Equation Solver -->
        <div class="page" id="page2">
            <h1 class="page-title">Orthogonal Trajectories Solver</h1>
            
            <div class="solver-container">
                <div class="input-section">
                    <div class="form-group">
                        <label for="equation-input">Enter Your Equation (in x and y only):</label>
                        <input type="text" id="equation-input" class="equation-input" placeholder="e.g., y = x^2 + C or dy/dx = x/y or x^2 + y^2 = C">
                        <p class="hint">You can enter explicit, implicit, or differential forms. Use ^ for exponents, * for multiplication.</p>
                    </div>
                    
                    <div class="example-equations">
                        <p style="width:100%; margin-bottom:10px; color:#4cc9f0;"><strong>Try these examples:</strong></p>
                        <button class="example-btn" data-eq="x^2 + y^2 = C">x² + y² = C</button>
                        <button class="example-btn" data-eq="y = C*x">y = Cx</button>
                        <button class="example-btn" data-eq="dy/dx = x/y">dy/dx = x/y</button>
                        <button class="example-btn" data-eq="y = C/x">y = C/x</button>
                        <button class="example-btn" data-eq="y = C*e^x">y = Ce^x</button>
                    </div>
                    
                    <button class="solve-btn" id="solve-btn">
                        <i class="fas fa-calculator"></i> Solve Orthogonal Trajectories
                    </button>
                </div>
                
                <div class="output-section">
                    <h3 style="margin-bottom: 15px; color: #f72585;">Solution Steps</h3>
                    <div class="steps-container" id="steps-container">
                        <div class="step">
                            <div class="step-title">Step 1: Enter an equation</div>
                            <div class="step-content">Please enter an equation in the input field and click "Solve Orthogonal Trajectories" to see the step-by-step solution here.</div>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 30px; margin-bottom: 15px; color: #f72585;">Graph Visualization</h3>
                    <div class="graph-container" id="graph-container">
                        <!-- Graph will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Orthogonal Trajectories Solver &copy; 2023 | Mathematical Tool for Solving Orthogonal Trajectories</p>
        </footer>
    </div>

    <script>
        // Page navigation
        const page1Btn = document.getElementById('page1-btn');
        const page2Btn = document.getElementById('page2-btn');
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        
        page1Btn.addEventListener('click', () => {
            page1.classList.add('active');
            page2.classList.remove('active');
            page1Btn.classList.add('active');
            page2Btn.classList.remove('active');
        });
        
        page2Btn.addEventListener('click', () => {
            page1.classList.remove('active');
            page2.classList.add('active');
            page1Btn.classList.remove('active');
            page2Btn.classList.add('active');
        });
        
        // Example equation buttons
        const exampleBtns = document.querySelectorAll('.example-btn');
        const equationInput = document.getElementById('equation-input');
        
        exampleBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                equationInput.value = btn.getAttribute('data-eq');
            });
        });
        
        // Solve button functionality
        const solveBtn = document.getElementById('solve-btn');
        const stepsContainer = document.getElementById('steps-container');
        const graphContainer = document.getElementById('graph-container');
        
        solveBtn.addEventListener('click', () => {
            const equation = equationInput.value.trim();
            if (!equation) {
                alert('Please enter an equation.');
                return;
            }
            
            // Parse and solve the equation
            const result = solveOrthogonalTrajectories(equation);
            
            // Display steps
            displaySteps(result.steps);
            
            // Display graph
            displayGraph(result.originalCurves, result.orthogonalCurves, equation);
        });
        
        // Function to solve orthogonal trajectories
        function solveOrthogonalTrajectories(equation) {
            const steps = [];
            let originalCurves = [];
            let orthogonalCurves = [];
            
            // Step 1: Parse the equation
            steps.push({
                title: "Step 1: Parse the input equation",
                content: `Input equation: ${equation}\n\nWe analyze the equation format to determine how to proceed.`
            });
            
            // Step 2: Identify the form and extract differential equation
            let differentialEq = "";
            let originalForm = "";
            
            if (equation.includes("dy/dx") || equation.includes("y'")) {
                // Differential form
                differentialEq = equation.replace("dy/dx", "dy/dx").replace("y'", "dy/dx");
                originalForm = "differential";
                steps.push({
                    title: "Step 2: Identify equation form",
                    content: `The equation is in differential form: ${differentialEq}\nWe can use it directly to find orthogonal trajectories.`
                });
            } else if (equation.includes("=")) {
                // Explicit or implicit form
                const parts = equation.split("=");
                if (parts[0].includes("y") && !parts[0].includes("^") && parts[0].trim() === "y") {
                    // Explicit form y = f(x)
                    originalForm = "explicit";
                    const fOfX = parts[1].trim();
                    differentialEq = `dy/dx = d/dx(${fOfX})`;
                    steps.push({
                        title: "Step 2: Identify equation form",
                        content: `The equation is in explicit form: y = ${fOfX}\nWe differentiate to find dy/dx.`
                    });
                } else {
                    // Implicit form
                    originalForm = "implicit";
                    steps.push({
                        title: "Step 2: Identify equation form",
                        content: `The equation is in implicit form: ${equation}\nWe differentiate implicitly to find dy/dx.`
                    });
                    
                    // For implicit form, we differentiate both sides
                    let leftSide = parts[0].trim();
                    let rightSide = parts[1].trim();
                    
                    // Simple implicit differentiation for common forms
                    if (leftSide.includes("x^2 + y^2") && rightSide === "C") {
                        differentialEq = "dy/dx = -x/y";
                        steps.push({
                            title: "Step 3: Differentiate implicitly",
                            content: `Differentiating x² + y² = C with respect to x:\n2x + 2y * dy/dx = 0\n=> 2y * dy/dx = -2x\n=> dy/dx = -x/y`
                        });
                    } else if (leftSide === "y" && rightSide.includes("C*x")) {
                        differentialEq = "dy/dx = C";
                        steps.push({
                            title: "Step 3: Differentiate explicitly",
                            content: `Differentiating y = Cx with respect to x:\ndy/dx = C\nBut C = y/x, so dy/dx = y/x`
                        });
                        differentialEq = "dy/dx = y/x";
                    } else if (leftSide === "y" && rightSide.includes("C/x")) {
                        differentialEq = "dy/dx = -C/x^2";
                        steps.push({
                            title: "Step 3: Differentiate explicitly",
                            content: `Differentiating y = C/x with respect to x:\ndy/dx = -C/x²\nBut C = xy, so dy/dx = -xy/x² = -y/x`
                        });
                        differentialEq = "dy/dx = -y/x";
                    } else {
                        // Generic case
                        differentialEq = "dy/dx = f(x, y)";
                        steps.push({
                            title: "Step 3: Differentiate implicitly",
                            content: `Differentiating implicitly, we obtain a differential equation relating dy/dx, x, and y.`
                        });
                    }
                }
            }
            
            // Step 3: Find orthogonal trajectories
            let orthogonalDiffEq = "";
            
            if (differentialEq.includes("dy/dx = -x/y")) {
                orthogonalDiffEq = "dy/dx = y/x";
                steps.push({
                    title: "Step 4: Find orthogonal trajectories",
                    content: `For orthogonal trajectories, replace dy/dx with -1/(dy/dx):\nOriginal: dy/dx = -x/y\nOrthogonal: dy/dx = -1/(-x/y) = y/x`
                });
            } else if (differentialEq.includes("dy/dx = y/x")) {
                orthogonalDiffEq = "dy/dx = -x/y";
                steps.push({
                    title: "Step 4: Find orthogonal trajectories",
                    content: `For orthogonal trajectories, replace dy/dx with -1/(dy/dx):\nOriginal: dy/dx = y/x\nOrthogonal: dy/dx = -1/(y/x) = -x/y`
                });
            } else if (differentialEq.includes("dy/dx = -y/x")) {
                orthogonalDiffEq = "dy/dx = x/y";
                steps.push({
                    title: "Step 4: Find orthogonal trajectories",
                    content: `For orthogonal trajectories, replace dy/dx with -1/(dy/dx):\nOriginal: dy/dx = -y/x\nOrthogonal: dy/dx = -1/(-y/x) = x/y`
                });
            } else if (differentialEq.includes("dy/dx = x/y")) {
                orthogonalDiffEq = "dy/dx = -y/x";
                steps.push({
                    title: "Step 4: Find orthogonal trajectories",
                    content: `For orthogonal trajectories, replace dy/dx with -1/(dy/dx):\nOriginal: dy/dx = x/y\nOrthogonal: dy/dx = -1/(x/y) = -y/x`
                });
            } else {
                orthogonalDiffEq = "dy/dx = -1/(original slope)";
                steps.push({
                    title: "Step 4: Find orthogonal trajectories",
                    content: `For orthogonal trajectories, we replace dy/dx with -1/(dy/dx) in the differential equation.`
                });
            }
            
            // Step 5: Solve the orthogonal differential equation
            let orthogonalSolution = "";
            
            if (orthogonalDiffEq === "dy/dx = y/x") {
                orthogonalSolution = "ln|y| = ln|x| + K => y = Kx";
                steps.push({
                    title: "Step 5: Solve the orthogonal differential equation",
                    content: `Solving: dy/dx = y/x\nSeparate variables: dy/y = dx/x\nIntegrate: ∫dy/y = ∫dx/x\nResult: ln|y| = ln|x| + C₁\nExponentiate: y = Kx where K = e^{C₁}`
                });
            } else if (orthogonalDiffEq === "dy/dx = -x/y") {
                orthogonalSolution = "x^2 + y^2 = K";
                steps.push({
                    title: "Step 5: Solve the orthogonal differential equation",
                    content: `Solving: dy/dx = -x/y\nSeparate variables: y dy = -x dx\nIntegrate: ∫y dy = -∫x dx\nResult: ½y² = -½x² + C₁\nMultiply by 2: y² = -x² + 2C₁\nRearrange: x² + y² = K where K = 2C₁`
                });
            } else if (orthogonalDiffEq === "dy/dx = x/y") {
                orthogonalSolution = "y^2 = x^2 + K";
                steps.push({
                    title: "Step 5: Solve the orthogonal differential equation",
                    content: `Solving: dy/dx = x/y\nSeparate variables: y dy = x dx\nIntegrate: ∫y dy = ∫x dx\nResult: ½y² = ½x² + C₁\nMultiply by 2: y² = x² + K where K = 2C₁`
                });
            } else if (orthogonalDiffEq === "dy/dx = -y/x") {
                orthogonalSolution = "xy = K";
                steps.push({
                    title: "Step 5: Solve the orthogonal differential equation",
                    content: `Solving: dy/dx = -y/x\nSeparate variables: dy/y = -dx/x\nIntegrate: ∫dy/y = -∫dx/x\nResult: ln|y| = -ln|x| + C₁\nExponentiate: y = e^{C₁}/x => xy = K where K = e^{C₁}`
                });
            } else {
                orthogonalSolution = "Family of curves orthogonal to the original";
                steps.push({
                    title: "Step 5: Solve the orthogonal differential equation",
                    content: `Solving the orthogonal differential equation gives a family of curves that intersect the original family at right angles.`
                });
            }
            
            // Step 6: Final result
            steps.push({
                title: "Step 6: Final Result",
                content: `Original family: ${equation}\nOrthogonal trajectories: ${orthogonalSolution}\n\nThese two families of curves intersect each other at right angles (orthogonally).`
            });
            
            // Generate data for graphing
            originalCurves = generateCurveData(equation);
            orthogonalCurves = generateOrthogonalCurveData(orthogonalSolution);
            
            return {
                steps: steps,
                originalCurves: originalCurves,
                orthogonalCurves: orthogonalCurves
            };
        }
        
        // Function to display steps
        function displaySteps(steps) {
            stepsContainer.innerHTML = '';
            
            steps.forEach(step => {
                const stepElement = document.createElement('div');
                stepElement.className = 'step';
                
                stepElement.innerHTML = `
                    <div class="step-title">${step.title}</div>
                    <div class="step-content">${step.content}</div>
                `;
                
                stepsContainer.appendChild(stepElement);
            });
        }
        
        // Function to generate curve data for the original equation
        function generateCurveData(equation) {
            const curves = [];
            
            // Generate data for different values of C
            for (let c = -2; c <= 2; c++) {
                const curve = {
                    x: [],
                    y: [],
                    type: 'scatter',
                    mode: 'lines',
                    name: `Original (C=${c})`,
                    line: { color: '#4cc9f0', width: 2 }
                };
                
                // Generate points based on equation type
                if (equation.includes("x^2 + y^2 = C")) {
                    // Circles
                    for (let theta = 0; theta <= 2 * Math.PI; theta += 0.1) {
                        const radius = Math.sqrt(Math.abs(c)) || 1;
                        curve.x.push(radius * Math.cos(theta));
                        curve.y.push(radius * Math.sin(theta));
                    }
                } else if (equation.includes("y = C*x") || equation === "y = Cx") {
                    // Lines through origin
                    for (let x = -5; x <= 5; x += 0.2) {
                        curve.x.push(x);
                        curve.y.push(c * x);
                    }
                } else if (equation.includes("dy/dx = x/y") || equation.includes("x^2 - y^2 = C")) {
                    // Hyperbolas
                    for (let x = -5; x <= 5; x += 0.2) {
                        if (x !== 0) {
                            curve.x.push(x);
                            curve.y.push(Math.sqrt(x*x + c));
                        }
                    }
                } else if (equation.includes("y = C/x") || equation.includes("xy = C")) {
                    // Rectangular hyperbolas
                    for (let x = -5; x <= 5; x += 0.1) {
                        if (x !== 0 && c !== 0) {
                            curve.x.push(x);
                            curve.y.push(c / x);
                        }
                    }
                } else {
                    // Default: some generic curves
                    for (let x = -5; x <= 5; x += 0.2) {
                        curve.x.push(x);
                        curve.y.push(c * Math.sin(x) + x);
                    }
                }
                
                curves.push(curve);
            }
            
            return curves;
        }
        
        // Function to generate curve data for orthogonal trajectories
        function generateOrthogonalCurveData(solution) {
            const curves = [];
            
            // Generate data for different values of K
            for (let k = -2; k <= 2; k++) {
                const curve = {
                    x: [],
                    y: [],
                    type: 'scatter',
                    mode: 'lines',
                    name: `Orthogonal (K=${k})`,
                    line: { color: '#f72585', width: 2, dash: 'dash' }
                };
                
                // Generate points based on solution type
                if (solution.includes("y = Kx")) {
                    // Lines through origin
                    for (let x = -5; x <= 5; x += 0.2) {
                        curve.x.push(x);
                        curve.y.push(k * x);
                    }
                } else if (solution.includes("x^2 + y^2 = K")) {
                    // Circles
                    for (let theta = 0; theta <= 2 * Math.PI; theta += 0.1) {
                        const radius = Math.sqrt(Math.abs(k)) || 1;
                        curve.x.push(radius * Math.cos(theta));
                        curve.y.push(radius * Math.sin(theta));
                    }
                } else if (solution.includes("y^2 = x^2 + K")) {
                    // Hyperbolas
                    for (let x = -5; x <= 5; x += 0.2) {
                        if (Math.abs(x) >= Math.sqrt(Math.abs(k))) {
                            curve.x.push(x);
                            curve.y.push(Math.sqrt(x*x + k));
                        }
                    }
                } else if (solution.includes("xy = K")) {
                    // Rectangular hyperbolas
                    for (let x = -5; x <= 5; x += 0.1) {
                        if (x !== 0 && k !== 0) {
                            curve.x.push(x);
                            curve.y.push(k / x);
                        }
                    }
                } else {
                    // Default: some generic orthogonal curves
                    for (let x = -5; x <= 5; x += 0.2) {
                        curve.x.push(x);
                        curve.y.push(k * Math.cos(x) - x);
                    }
                }
                
                curves.push(curve);
            }
            
            return curves;
        }
        
        // Function to display graph
        function displayGraph(originalCurves, orthogonalCurves, equation) {
            const data = [...originalCurves, ...orthogonalCurves];
            
            const layout = {
                title: `Orthogonal Trajectories for: ${equation}`,
                xaxis: {
                    title: 'x',
                    range: [-5, 5],
                    gridcolor: 'rgba(255,255,255,0.1)',
                    zerolinecolor: 'rgba(255,255,255,0.3)'
                },
                yaxis: {
                    title: 'y',
                    range: [-5, 5],
                    gridcolor: 'rgba(255,255,255,0.1)',
                    zerolinecolor: 'rgba(255,255,255,0.3)'
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0.2)',
                font: { color: '#f1f1f1' },
                showlegend: true,
                legend: {
                    x: 0,
                    y: 1,
                    bgcolor: 'rgba(0,0,0,0.5)'
                }
            };
            
            Plotly.newPlot(graphContainer, data, layout, {responsive: true});
        }
        
        // Initialize with an example
        window.addEventListener('DOMContentLoaded', () => {
            equationInput.value = "x^2 + y^2 = C";
            solveBtn.click();
        });
    </script>
</body>
</html>


